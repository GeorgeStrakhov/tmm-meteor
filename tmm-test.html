<head>
  <title>tmm-test</title>
</head>

<body>
  {{> app}}
  <div class="footer">
    2012 | fnlly
  </div>
</body>

<template name="app">
  {{#if userLogged}}
    {{> myApp}}
  {{else}}  
    {{> welcome}}   
  {{/if}}
</template>

<template name="welcome">
  {{loginButtons}}
  <div class="container">
    <p>Welcome to the app!</p>
    <p>Please sign in or sign up to enjoy it.</p>
  </div>
</template>

<template name="myApp">
  {{loginButtons}}
  {{> mainMenu}}
  <div class="container">
    {{#if activeGiants}}
      {{> giants}}
    {{/if}}
    {{#if activeFeed}}
      {{> feed}}
    {{/if}}
    {{#if activeMe}}
      {{> me}}
    {{/if}}
  </div>
</template>

<template name="mainMenu">
  <div class="mainMenu">
    <ul>
      {{#each items}}
        <li><a href="#" id="{{this}}" class="mainMenuItem">{{this}}</a></li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="giants">
  {{#if noGiants}}
    <p>Time add your first giant!</p>
    {{> addGiant}}
  {{else}}
    {{#if selectedGiant}}
      {{> singleGiantPage}}
    {{else}}
      {{> allGiants}}
    {{/if}}
  {{/if}}
</template>

<template name="addGiant">
  <a href="#" id="addGiantLink">add giant</a>
  <div class="addGiantForm hidden">
    <input type="text" name="newGiantName" id="newGiantName" />
    <input type="button" id="addGiantButton" value="add" />
  </div>
</template>

<template name="allGiants">
  <div class="allGiants">
    <ul class="allGiantsList">
      {{#each giants}}
        <li>{{> singleGiantItem}}</li>
      {{/each}}
    </ul>
  </div>
  {{> addGiant}}
</template>

<template name="singleGiantItem">
  <a href="#" id="{{this.name}}" class="singleGiantLink">{{this.name}}</a>
</template>

<template name="singleGiantPage">
  {{#if editGiantMode}}
    {{> editGiantPage}}
  {{else}}
    <h1>{{giant.name}}</h1>
    <em>{{giant.description}}</em>
    {{> isStandingOn}}
    {{> areStandingOnMe}}
    <p><a href="#" id="editGiantLink">edit</a></p>
  {{/if}}
</template>

<template name="isStandingOn">
  <div>
    <p>People {{giant.name}} is standing on:</p>
    <ul>
      {{#each myGiants}}
        <!-- here we need to have if editing or not-->
        <li>{{> singleGiantItem}}</li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="areStandingOnMe">
  <div>
    <p>People standing on {{giant.name}}:</p>
    <ul>
      {{#each myDwarfs}}
        <!-- here we need to have if editing or not-->
        <li>{{> singleGiantItem}}</li>
      {{/each}}
    </ul>
  </div>
</template>

<template name="editGiantPage">
  Name: <input type="text" name="newName" id="newGiantName" value="{{giant.name}}" />
  <br />
  Description: <textarea name="newGiantDescription" id="newGiantDescription">{{giant.description}}</textarea>
  <br />
  {{> isStandingOn}}
  {{> areStandingOnMe}}
  <p><a href="#" id="cancelEdit">cancel</a> or 
  <input type="button" value="save" id="saveGiantButton" /></p>
  {{#unless myGiantPage}} <!-- you can't remove your own giant! -->
    <p><a href="#" id="removeGiant">remove this giant</a></p>
  {{/unless}}
</template>

<template name="feed">
  feed under construction...
</template>

<template name="me">
  {{> singleGiantPage}}
</template>
